#!/bin/bash
hostapd_files=(
"hostapd-2.11/hostapd/main.c"
"hostapd-2.11/hostapd/config_file.c"
"hostapd-2.11/hostapd/../src/ap/hostapd.c"
"hostapd-2.11/hostapd/../src/ap/wpa_auth_glue.c"
"hostapd-2.11/hostapd/../src/ap/drv_callbacks.c"
"hostapd-2.11/hostapd/../src/ap/ap_drv_ops.c"
"hostapd-2.11/hostapd/../src/ap/utils.c"
"hostapd-2.11/hostapd/../src/ap/authsrv.c"
"hostapd-2.11/hostapd/../src/ap/ieee802_1x.c"
"hostapd-2.11/hostapd/../src/ap/ap_config.c"
"hostapd-2.11/hostapd/../src/ap/eap_user_db.c"
"hostapd-2.11/hostapd/../src/ap/ieee802_11_auth.c"
"hostapd-2.11/hostapd/../src/ap/sta_info.c"
"hostapd-2.11/hostapd/../src/ap/wpa_auth.c"
"hostapd-2.11/hostapd/../src/ap/tkip_countermeasures.c"
"hostapd-2.11/hostapd/../src/ap/ap_mlme.c"
"hostapd-2.11/hostapd/../src/ap/wpa_auth_ie.c"
"hostapd-2.11/hostapd/../src/ap/preauth_auth.c"
"hostapd-2.11/hostapd/../src/ap/pmksa_cache_auth.c"
"hostapd-2.11/hostapd/../src/ap/ieee802_11_shared.c"
"hostapd-2.11/hostapd/../src/ap/beacon.c"
"hostapd-2.11/hostapd/../src/ap/bss_load.c"
"hostapd-2.11/hostapd/../src/ap/neighbor_db.c"
"hostapd-2.11/hostapd/../src/ap/rrm.c"
"hostapd-2.11/hostapd/../src/common/ptksa_cache.c"
"hostapd-2.11/hostapd/../src/drivers/drivers.c"
"hostapd-2.11/hostapd/../src/utils/eloop.c"
"hostapd-2.11/hostapd/../src/utils/common.c"
"hostapd-2.11/hostapd/../src/utils/wpa_debug.c"
"hostapd-2.11/hostapd/../src/utils/wpabuf.c"
"hostapd-2.11/hostapd/../src/utils/os_unix.c"
"hostapd-2.11/hostapd/../src/utils/ip_addr.c"
"hostapd-2.11/hostapd/../src/utils/crc32.c"
"hostapd-2.11/hostapd/../src/common/ieee802_11_common.c"
"hostapd-2.11/hostapd/../src/common/wpa_common.c"
"hostapd-2.11/hostapd/../src/common/hw_features_common.c"
"hostapd-2.11/hostapd/../src/eapol_auth/eapol_auth_sm.c"
"hostapd-2.11/hostapd/../src/eapol_auth/eapol_auth_dump.c"
"hostapd-2.11/hostapd/../src/common/ctrl_iface_common.c"
"hostapd-2.11/hostapd/ctrl_iface.c"
"hostapd-2.11/hostapd/../src/ap/ctrl_iface_ap.c"
"hostapd-2.11/hostapd/../src/drivers/driver_nl80211.c"
"hostapd-2.11/hostapd/../src/drivers/driver_nl80211_capa.c"
"hostapd-2.11/hostapd/../src/drivers/driver_nl80211_event.c"
"hostapd-2.11/hostapd/../src/drivers/driver_nl80211_monitor.c"
"hostapd-2.11/hostapd/../src/drivers/driver_nl80211_scan.c"
"hostapd-2.11/hostapd/../src/drivers/netlink.c"
"hostapd-2.11/hostapd/../src/drivers/rfkill.c"
"hostapd-2.11/hostapd/../src/utils/radiotap.c"
"hostapd-2.11/hostapd/../src/drivers/linux_ioctl.c"
"hostapd-2.11/hostapd/../src/l2_packet/l2_packet_none.c"
"hostapd-2.11/hostapd/eap_register.c"
"hostapd-2.11/hostapd/../src/eap_server/eap_server.c"
"hostapd-2.11/hostapd/../src/eap_common/eap_common.c"
"hostapd-2.11/hostapd/../src/eap_server/eap_server_methods.c"
"hostapd-2.11/hostapd/../src/eap_server/eap_server_identity.c"
"hostapd-2.11/hostapd/../src/crypto/crypto_openssl.c"
"hostapd-2.11/hostapd/../src/crypto/tls_none.c"
"hostapd-2.11/hostapd/../src/crypto/sha1-prf.c"
"hostapd-2.11/hostapd/../src/crypto/sha256-prf.c"
"hostapd-2.11/hostapd/../src/crypto/sha256-tlsprf.c"
"hostapd-2.11/hostapd/../src/crypto/random.c"
"hostapd-2.11/hostapd/../src/ap/wmm.c"
"hostapd-2.11/hostapd/../src/ap/ap_list.c"
"hostapd-2.11/hostapd/../src/ap/comeback_token.c"
"hostapd-2.11/hostapd/../src/pasn/pasn_responder.c"
"hostapd-2.11/hostapd/../src/pasn/pasn_common.c"
"hostapd-2.11/hostapd/../src/ap/ieee802_11.c"
"hostapd-2.11/hostapd/../src/ap/hw_features.c"
"hostapd-2.11/hostapd/../src/ap/dfs.c"
"hostapd-2.11/hostapd/../src/ap/ieee802_11_ht.c"
"hostapd-2.11/hostapd/../src/drivers/driver_common.c"
)

#echo "" > h1.txt

#
# Example: iterate over array
#for file in "${hostapd_files[@]}"; do
    #echo "$file"
 #   cat $file | grep -i "#include " >> h1.txt
#done

#echo "------------- headers are -------------"
#cat h1.txt | cut -f 2 -d " " | sort | uniq > h2.txt
#cat h2.txt

hostapd_headers=(
"accounting.h"
"acs.h"
"aes_wrap.h"
"airtime_policy.h"
"android/log.h"
"ap/ap_config.h"
"ap/ap_drv_ops.h"
"ap/beacon.h"
"ap/comeback_token.h"
"ap_config.h"
"ap/ctrl_iface_ap.h"
"ap/dfs.h"
"ap/dpp_hostapd.h"
"ap_drv_ops.h"
"ap/hostapd.h"
"ap/hs20.h"
"ap/ieee802_11.h"
"ap/ieee802_1x.h"
"ap_list.h"
"ap_mlme.h"
"ap/nan_usd_ap.h"
"ap/neighbor_db.h"
"ap/pmksa_cache_auth.h"
"ap/rrm.h"
"ap/sta_info.h"
"ap/wnm_ap.h"
"ap/wpa_auth.h"
"ap/wps_hostapd.h"
"assert.h"
"authsrv.h"
"beacon.h"
"bss_load.h"
"comeback_token.h"
"common/brcm_vendor.h"
"common/ctrl_iface_common.h"
"common/dhcp.h"
"common/dpp.h"
"common/eapol_common.h"
"common.h"
"common/hw_features_common.h"
"common/ieee802_11_common.h"
"common/ieee802_11_defs.h"
"common/ieee802_1x_defs.h"
"common/linux_bridge.h"
"common/nan_de.h"
"common/ocv.h"
"common/ptksa_cache.h"
"common/qca-vendor-attr.h"
"common/qca-vendor.h"
"common/sae.h"
"common/version.h"
"common/wpa_common.h"
"common/wpa_ctrl.h"
"config_file.h"
"CoreServices/CoreServices.h"
"crypto/aes.h"
"crypto/aes_siv.h"
"crypto/aes_wrap.h"
"crypto/crypto.h"
"crypto.h"
"crypto/md5.h"
"crypto/random.h"
"crypto/sha1.h"
"crypto/sha256.h"
"crypto/sha384.h"
"crypto/sha512.h"
"crypto/tls.h"
"ctrl_iface_ap.h"
"ctrl_iface_common.h"
"ctrl_iface.h"
"defs.h"
"dfs.h"
"dhcp_snoop.h"
"dh_group5.h"
"dpp_hostapd.h"
"driver.h"
"driver_nl80211.h"
"drivers/driver.h"
"eap_common/eap_common.h"
"eap_common/eap_defs.h"
"eap_common/eap_wsc_common.h"
"eap_common.h"
"eap_defs.h"
"eap_i.h"
"eap_methods.h"
"eapol_auth/eapol_auth_sm.h"
"eapol_auth/eapol_auth_sm_i.h"
"eapol_auth_sm.h"
"eapol_auth_sm_i.h"
"eap_register.h"
"eap_server/eap.h"
"eap_server/eap_methods.h"
"eap_server/eap_sim_db.h"
"eap_server/tncs.h"
"eloop.h"
"eth_p_oui.h"
"fcntl.h"
"fils_hlp.h"
"fst/fst_ctrl_iface.h"
"fst/fst.h"
"gas_query_ap.h"
"gas_serv.h"
"grp.h"
"hostapd.h"
"hs20.h"
"hw_features_common.h"
"hw_features.h"
"ieee802_11_auth.h"
"ieee802_11_common.h"
"ieee802_11_defs.h"
"ieee802_11.h"
"ieee802_1x.h"
"includes.h"
"ip_addr.h"
"l2_packet.h"
"l2_packet/l2_packet.h"
"limits.h"
"linux_defines.h"
"linux/errqueue.h"
"linux/filter.h"
"linux_ioctl.h"
"linux/rtnetlink.h"
"list.h"
"mach/mach.h"
"mach/mach_time.h"
"mbo_ap.h"
"md5.h"
"nan_usd_ap.h"
"ndisc_snoop.h"
"neighbor_db.h"
"netdb.h"
"net/ethernet.h"
"net/if_arp.h"
"net/if_ether.h"
"net/if.h"
"netinet/ip.h"
"netlink/genl/ctrl.h"
"netlink/genl/family.h"
"netlink/genl/genl.h"
"netlink.h"
"netpacket/packet.h"
"openssl/aes.h"
"openssl/asn1.h"
"openssl/asn1t.h"
"openssl/bn.h"
"openssl/cmac.h"
"openssl/core_names.h"
"openssl/decoder.h"
"openssl/des.h"
"openssl/dh.h"
"openssl/ec.h"
"openssl/encoder.h"
"openssl/err.h"
"openssl/evp.h"
"openssl/hmac.h"
"openssl/hpke.h"
"openssl/opensslv.h"
"openssl/param_build.h"
"openssl/pem.h"
"openssl/provider.h"
"openssl/rand.h"
"openssl/rsa.h"
"openssl/x509.h"
"os.h"
"p2p_hostapd.h"
"p2p/p2p.h"
"pasn_common.h"
"pasn/pasn_common.h"
"platform.h"
"pmksa_cache_auth.h"
"poll.h"
"preauth_auth.h"
"private/android_filesystem_config.h"
"priv_netlink.h"
"qca-vendor.h"
"radiotap.h"
"radiotap_iter.h"
"radius/radius_client.h"
"radius/radius_das.h"
"radius/radius.h"
"radius/radius_server.h"
"random.h"
"rfkill.h"
"rrm.h"
"sha1.h"
"sha256.h"
"sha384.h"
"sha512.h"
"sqlite3.h"
"sta_info.h"
"state_machine.h"
"stddef.h"
"stdio.h"
"string.h"
"sys/capability.h"
"sys/epoll.h"
"sys/event.h"
"sys/ioctl.h"
"syslog.h"
"sys/prctl.h"
"sys/random.h"
"sys/stat.h"
"sys/types.h"
"sys/un.h"
"sys/utsname.h"
"sys/wait.h"
"taxonomy.h"
"time.h"
"tkip_countermeasures.h"
"tls.h"
"trace.h"
"utils/bitfield.h"
"utils/common.h"
"utils/const_time.h"
"utils/crc32.h"
"utils/eloop.h"
"utils/includes.h"
"utils/list.h"
"utils/module_tests.h"
"utils/state_machine.h"
"utils/uuid.h"
"vlan.h"
"vlan_init.h"
"wmm.h"
"wnm_ap.h"
"wpa_auth_glue.h"
"wpa_auth.h"
"wpa_auth_ie.h"
"wpa_auth_i.h"
"wpa_auth_kay.h"
"wpabuf.h"
"wpa_common.h"
"wpa_debug.h"
"wps_hostapd.h"
"wps/wps_defs.h"
"wps/wps.h"
"x_snoop.h"
)
echo "" > m1.txt

for hostapd_header in "${hostapd_headers[@]}"; do
    #echo "$file"
    bh=`basename $hostapd_header`
   for i in `find hostapd-2.11 -iname "$bh" -print`;
   do
	    if [[ -f "$i" ]]; then
		    #echo "Header $bh is found"
		    grep -i "#ifdef " $i >> m1.txt
		    grep -i "#ifndef " $i >> m1.txt
	    else
		    echo "Header $bh is not found"
	    fi
    done
done

for hostapd_file in "${hostapd_files[@]}"; do
    #echo "$file"
    bc=`basename $hostapd_file`
    for i in `find hostapd-2.11 -iname "$bc" -print`;
    do
	    if [[ -f "$i" ]]; then
		    #echo "Source $bc is found"
		    grep -i "#ifdef " $i >> m1.txt
		    grep -i "#ifndef " $i >> m1.txt
	    else
		    echo "Source $bc is not found"
	    fi
    done
done

cat m1.txt | cut -f 2 -d " " | sort | uniq > m2.txt
